{% extends "disasterrehabilitation/disasterrehabilitation.html" %}

{% load i18n leaflet_tags verbose_names crispy_forms_tags common_tags common_filters %}

{% block title %}{{ block.super }} - {{ disasterrehabilitation }}{% endblock %}

{% block extra_css %}

{% endblock %}

{% block page_content_upper %}
<div class="widget-main">
    <div class="widget-inner">
        <div class="course-search">
            <h3>{% trans "Search Disaster Rehabilitation" %}</h3>
            {% crispy form %}
        </div>
    </div>
</div>
{% endblock %}

{% block crumbs %}
{{ block.super }}
<h6 class="page-active">{{ activity }}</h6>
{% endblock %}

{% block page_content %}

<h3 class="page-header heading">{% trans "Event Assessment" %}</h3>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            {% for eventassessment in eventassessments|slice:'1' %}
            <th width='5%'>{% trans "No." %}</th>
            <th class="col-md-2">{% get_verbose_field_name eventassessment 'created' %}</th>
            <th class="col-md-2">{% get_verbose_field_name eventassessment 'event' %}</th>
            <th class="col-md-2">{% get_verbose_field_name eventassessment 'name' %}</th>
            <th class="col-md-1">{% get_verbose_field_name eventassessment 'published' %}</th>
            <th class="col-md-1">{% get_verbose_field_name eventassessment 'file' %}</th>
            <th>{% get_verbose_field_name eventassessment 'note' %}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for eventassessment in eventassessments %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{{ eventassessment.get_absolute_url }}">{{ eventassessment.created }}</a></td>
            <td>{{ eventassessment.event }}</td>
            <td>{{ eventassessment.name }}</td>
            <td>{{ eventassesment.published }}</td>
            <td><a href='{{ reference.file.url }}' download>{{ eventassessment.file|filename }}</td>
            <td>{{ eventassessment.note }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">{% trans "No event assessments found." %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 class="page-header heading">{% trans "Activity" %}</h3>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            {% for activity in activities|slice:'1' %}
            <th width='5%'>{% trans "No." %}</th>
            <th class="col-md-2">{% get_verbose_field_name activity 'created' %}</th>
            <th>{% get_verbose_field_name activity 'name' %}</th>
            <th>{% get_verbose_field_name activity 'type' %}</th>
            <th>{% get_verbose_field_name activity 'agency' %}</th>
            <th>{% get_verbose_field_name activity 'year' %}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for activity in activities %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{{ activity.get_absolute_url }}">{{ activity.created }}</a></td>
            <td>{{ activity.name }}</td>
            <td>{{ activity.type }}</td>
            <td>{{ activity.agency }}</td>
            <td>{{ activity.year }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">{% trans 'No Data found.' %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 class="page-header heading">{% trans "Event" %}</h3>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            {% for event in events|slice:'1' %}
            <th width='5%'>{% trans "No." %}</th>
            <th class="col-md-2">{% get_verbose_field_name event 'disaster' %}</th>
            <th class="col-md-2">{% get_verbose_field_name event 'created' %}</th>
            <th class="col-md-2">{% get_verbose_field_name event 'updated' %}</th>
            <th class="col-md-1">{% get_verbose_field_name event 'height' %}</th>
            <th class="col-md-1">{% get_verbose_field_name event 'magnitude' %}</th>
            <th>{% get_verbose_field_name event 'note' %}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for event in events %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{{ event.get_absolute_url }}">{{ event.disaster }}</a></td>
            <td>{{ event.created }}</td>
            <td>{{ event.updated }}</td>
            <td>{{ event.height }}</td>
            <td>{{ event.magnitude }}</td>
            <td>{{ event.note }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">{% trans "No events found." %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
