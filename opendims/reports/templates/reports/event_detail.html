{% extends "opendims/opendims_base.html" %}

{% load staticfiles leaflet_tags %}

{% block title %}{{ event }}{% endblock %}

{% block extra_css %}
{% leaflet_css %}
<style>
.leaflet-container {  /* all maps */
    width:  800px;
    height: 600px;
}
</style>
{% endblock %}

{% block content %}
<div class="container">
{{ event.disaster }}

{% leaflet_map "country_map" callback="window.country_map_init" %}
</div><!-- /.container -->
{% endblock %}


{% block extra_js %}
{% leaflet_js %}

<script type="text/javascript">
function country_map_init(map, options) {
  var markerArray=[];
  markerArray.push(L.marker([-6.2115, 106.8452]).addTo(map));
  var group = L.featureGroup(markerArray).addTo(map);
  map.fitBounds(group.getBounds())
    L.geoJson({{ event.province.geojson|safe }})
}
</script>

{% endblock %}
